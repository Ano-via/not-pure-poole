---
layout: post
title: "base64 ç¼–ç å·¥å…·"
permalink: base64.html
---

<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>Base64 è½¬æ¢å·¥å…·</title>
<style>
/* æ‰€æœ‰æ ·å¼åŠ å‰ç¼€ .b64-tool é¿å…å†²çª */
.b64-tool {
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  max-width: 600px;
  margin: 40px auto;
  padding: 20px;
  border-radius: 12px;
  background: #fefefe;
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

.b64-tool h2 {
  font-size: 1.3em;
  margin-bottom: 10px;
  color: #333;
  border-bottom: 2px solid #f0f0f0;
  padding-bottom: 5px;
}

.b64-tool input[type="file"],
.b64-tool input[type="text"],
.b64-tool button,
.b64-tool textarea {
  width: 100%;
  margin: 10px 0;
  padding: 12px;
  border-radius: 8px;
  border: 1px solid #ccc;
  box-sizing: border-box;
  font-size: 1em;
}

.b64-tool input[type="file"] {
  padding: 5px;
}

.b64-tool button {
  background: #4CAF50;
  color: #fff;
  border: none;
  cursor: pointer;
  transition: background 0.3s;
}

.b64-tool button:hover {
  background: #45a049;
}

.b64-tool .b64-result {
  margin-top: 10px;
  padding: 12px;
  border-radius: 8px;
  background: #f9f9f9;
  border: 1px solid #eee;
  word-break: break-all;
  max-height: 200px;
  overflow-y: auto;
  font-size: 0.9em;
  color: #555;
  cursor: pointer; /* æç¤ºå¯ç‚¹å‡» */
  transition: background 0.3s;
}
</style>
</head>
<body>

<div class="b64-tool">
  <h2>ğŸ“· æœ¬åœ°å›¾ç‰‡è½¬ Base64</h2>
  <input type="file" id="b64ImageInput" accept="image/*">
  <button onclick="convertImageToBase64()">è½¬æ¢å›¾ç‰‡</button>
  <div class="b64-result" id="b64ImageResult" onclick="copyResult(this)"></div>

  <h2>ğŸŒ å›¾ç‰‡ç½‘å€è½¬ Base64</h2>
  <input type="text" id="b64UrlInput" placeholder="è¯·è¾“å…¥å›¾ç‰‡ç½‘å€">
  <button onclick="convertImageUrlToBase64()">è½¬æ¢å›¾ç‰‡ç½‘å€</button>
  <div class="b64-result" id="b64UrlResult" onclick="copyResult(this)"></div>
</div>

<script>
  // æœ¬åœ°å›¾ç‰‡è½¬ Base64
  function convertImageToBase64() {
    const file = document.getElementById('b64ImageInput').files[0];
    if (!file) {
      alert('è¯·å…ˆé€‰æ‹©å›¾ç‰‡');
      return;
    }
    const reader = new FileReader();
    reader.onload = function(e) {
      document.getElementById('b64ImageResult').textContent = e.target.result;
    };
    reader.readAsDataURL(file);
  }

  // å›¾ç‰‡ç½‘å€è½¬ Base64
  function convertImageUrlToBase64() {
    const url = document.getElementById('b64UrlInput').value;
    if (!url) {
      alert('è¯·è¾“å…¥å›¾ç‰‡ç½‘å€');
      return;
    }

    const img = new Image();
    img.crossOrigin = 'Anonymous'; // é¿å…è·¨åŸŸé—®é¢˜
    img.src = url;

    img.onload = function() {
      const canvas = document.createElement('canvas');
      canvas.width = img.width;
      canvas.height = img.height;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(img, 0, 0);
      try {
        const base64 = canvas.toDataURL('image/png');
        document.getElementById('b64UrlResult').textContent = base64;
      } catch (e) {
        alert('è½¬æ¢å¤±è´¥ï¼Œå¯èƒ½æ˜¯è·¨åŸŸå›¾ç‰‡');
      }
    };

    img.onerror = function() {
      alert('å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘å€æ˜¯å¦æ­£ç¡®');
    };
  }

  // ç‚¹å‡»å¤åˆ¶å¹¶å˜è‰²
  function copyResult(element) {
    if (!element.textContent) return;
    navigator.clipboard.writeText(element.textContent).then(() => {
      const originalBg = element.style.background;
      element.style.background = '#d4f8d4'; // æµ…ç»¿è‰²
      setTimeout(() => {
        element.style.background = originalBg;
      }, 3000);
    }).catch(err => {
      alert('å¤åˆ¶å¤±è´¥ï¼š' + err);
    });
  }
</script>

</body>
</html>
