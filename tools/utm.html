---
layout: default
title: "URL Shortener"
---
<input type="text" id="longUrl" placeholder="输入长链接">
<select id="platform">
  <option value="bitly">Bitly</option>
  <option value="tinyurl">TinyURL</option>
  <option value="isgd">is.gd</option>
  <option value="reurl">Reurl.cc</option>
  <option value="rebrandly">Rebrandly</option>
  <option value="spoo">Spoo.me</option>
</select>
<button onclick="shorten()">生成短链</button>
<p id="result"></p>

<script>
async function shorten() {
  const url = document.getElementById('longUrl').value;
  const platform = document.getElementById('platform').value;
  const result = document.getElementById('result');
  result.innerText = '处理中...';

  try {
    const res = await fetch('https://billowing-moon-ce78.atticus-beta.workers.dev/', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ url: url, platform: platform })
    });
    const data = await res.json();
    if (res.ok) {
      result.innerHTML = `短链：<a href="${data.short_url}" target="_blank">${data.short_url}</a>`;
    } else {
      result.innerText = '失败: ' + data.error;
    }
  } catch (e) {
    result.innerText = '请求失败: ' + e.message;
  }
}
</script>
