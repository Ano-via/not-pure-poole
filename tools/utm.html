---
layout: default
title: "URL Shortener"
---
<h2>Bitly 短链生成器</h2>
  <input type="text" id="longUrl" placeholder="输入你的长链接">
  <button onclick="shortenUrl()">生成短链</button>
  <p id="result"></p>

  <script>
    async function shortenUrl() {
      const url = document.getElementById('longUrl').value;
      const result = document.getElementById('result');
      result.innerText = '生成中...';

      try {
        const response = await fetch('https://billowing-moon-ce78.atticus-beta.workers.dev/', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ url: url })
        });

        const data = await response.json();

        if (response.ok) {
          result.innerHTML = `短链：<a href="${data.short_url}" target="_blank">${data.short_url}</a>`;
        } else {
          result.innerText = '出错：' + (data.error || '未知错误');
        }
      } catch (err) {
        result.innerText = '请求失败：' + err;
      }
    }
  </script>