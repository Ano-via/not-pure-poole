---
layout: default
title: "å®å¯æ¢¦æ•è·ç‡è®¡ç®—å™¨"
permalink: poke.html
---
<style>
    label {
        display: block;
        margin-top: 12px;
    }

    input[type="range"],
    input[type="number"],
    input[type="text"] {
        padding: 6px;
        margin-top: 4px;
        width: 100%;
    }

    .radio-group {
        display: flex;
        gap: 10px;
        margin-top: 6px;
    }

    .radio-group label {
        margin-top: 0;
        font-weight: normal;
    }

    .row-inline {
        display: flex;
        gap: 10px;
        margin-top: 4px;
    }

    .row-inline input[type="text"] {
        flex: 2;
    }

    .row-inline input[type="number"] {
        flex: 1;
    }

    #result {
        margin-top: 20px;
        font-weight: bold;
    }

    #hpValue {
        font-weight: bold;
    }
</style>
<h2>å®å¯æ¢¦æ•è·ç‡è®¡ç®—å™¨</h2>


<div class="row-inline">
    <label>æœç´¢å®å¯æ¢¦</label>
    <input list="pokemonList" id="search" placeholder="å¦‚ 0001 æˆ– å¦™è›™ç§å­" oninput="fillCaptureRate()">
    <label>åŸºç¡€æ•è·ç³»æ•°</label>
    <input type="number" id="baseRate" min="1" max="255" value="45" oninput="calculate()">
</div>
<datalist id="pokemonList"></datalist>

<label for="hp">å½“å‰HPç™¾åˆ†æ¯”: <span id="hpValue">100%</span></label>
<input type="range" id="hp" min="0" max="100" value="100" oninput="updateHPValue(this.value)">

<label>ç²¾çµçƒç±»å‹:</label>
<div class="radio-group" id="ballGroup">
    <label><input type="radio" name="ball" value="1" checked> ç²¾çµçƒ</label>
    <label><input type="radio" name="ball" value="1.5"> è¶…çº§çƒ</label>
    <label><input type="radio" name="ball" value="2"> é«˜çº§çƒ</label>
</div>

<label>å¼‚å¸¸çŠ¶æ€:</label>
<div class="radio-group" id="statusGroup">
    <label><input type="radio" name="status" value="1" checked> æ— </label>
    <label><input type="radio" name="status" value="1.5"> ä¸­æ¯’ / ç¼ä¼¤ / éº»ç—¹</label>
    <label><input type="radio" name="status" value="2"> å†°å†» / ç¡çœ </label>
</div>

<div id="result"></div>

<script>
    const pokedex = [
        { ç¼–å·: "0001", åç§°: "å¦™è›™ç§å­", æ•è·ç‡: "45" },
        { ç¼–å·: "0002", åç§°: "å¦™è›™è‰", æ•è·ç‡: "45" },
        { ç¼–å·: "0003", åç§°: "å¦™è›™èŠ±", æ•è·ç‡: "45" }
    ];

    const dataList = document.getElementById('pokemonList');
    pokedex.forEach(p => {
        const opt = document.createElement('option');
        opt.value = `${p.ç¼–å·} ${p.åç§°}`;
        dataList.appendChild(opt);
    });

    function updateHPValue(value) {
        document.getElementById('hpValue').innerText = value + '%';
        calculate();
    }

    function fillCaptureRate() {
        const input = document.getElementById('search').value.trim();
        const found = pokedex.find(p => input.includes(p.ç¼–å·) || input.includes(p.åç§°));
        if (found) {
            document.getElementById('baseRate').value = found.æ•è·ç‡;
            calculate();
        }
    }

    function getRadioValue(name) {
        const radios = document.getElementsByName(name);
        for (let radio of radios) {
            if (radio.checked) return parseFloat(radio.value);
        }
        return 1;
    }

    function calculate() {
        const hpPercent = parseFloat(document.getElementById('hp').value);
        const baseRate = parseInt(document.getElementById('baseRate').value);
        const ballRate = getRadioValue('ball');
        const statusRate = getRadioValue('status');

        const a = (1 - 2 / 3 * (hpPercent / 100)) * baseRate * ballRate * statusRate;

        let resultText = `è®¡ç®—å‡ºçš„ a = ${a.toFixed(2)}<br>`;
        if (a >= 255) {
            resultText += `ğŸ¯ ç›´æ¥æ•è·æˆåŠŸï¼`;
        } else {
            let temp = Math.floor(16711680 / a);
            let sqrt1 = Math.floor(Math.sqrt(temp));
            let sqrt2 = Math.floor(Math.sqrt(sqrt1));
            const G = Math.floor(1048560 / sqrt2);
            const rate = Math.pow((G + 1) / 65536, 4);

            resultText += `G = ${G}<br>`;
            resultText += `æœ€ç»ˆæ•è·ç‡ = ${(rate * 100).toFixed(6)}%`;
        }

        document.getElementById('result').innerHTML = resultText;
    }

    // å®æ—¶ç›‘å¬ radio
    document.querySelectorAll('input[name="ball"], input[name="status"]').forEach(radio => {
        radio.addEventListener('change', calculate);
    });
</script>